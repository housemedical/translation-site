<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Essential meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <!-- Primary meta -->
    <title>Audio & Video Translation Service</title>
    <meta name="description" content="Upload an MP3 or MP4 and receive an English transcript in minutes – completely in‑browser and private.">

    <!-- Favicon (32×32 PNG placed in repo root) -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.png">

    <!-- Tailwind CSS v3 via CDN; smaller & faster than v2.2.19 -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <!-- Font Awesome 6 free icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

    <!-- Custom styles that Tailwind can’t easily cover -->
    <style>
        .drop-zone { @apply border-2 border-dashed border-blue-500 rounded-xl p-8 text-center transition-colors cursor-pointer; }
        .drop-zone:hover { @apply bg-blue-50; }
        .drop-zone.active { @apply bg-blue-100 border-blue-600; }
        .progress-bar { @apply h-2 bg-gray-200 rounded overflow-hidden; }
        .progress-bar-fill { @apply h-full bg-blue-500 w-0 transition-[width]; }
        .feature-icon { @apply bg-blue-100 text-blue-600 w-12 h-12 flex items-center justify-center rounded-full mb-4 mx-auto; }
        .results { @apply whitespace-pre-wrap max-h-96 overflow-y-auto bg-gray-50 rounded border border-gray-200 p-4; }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 font-sans">
    <!-- Container -->
    <div class="container mx-auto max-w-6xl p-6">
        <!-- Header / Hero -->
        <header class="h-52 bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl flex items-center justify-center mb-8 text-white">
            <h1 class="text-4xl font-bold text-center">Audio &amp; Video Translation Service</h1>
        </header>

        <!-- Upload Card -->
        <section class="card bg-white rounded-xl shadow p-8 mb-8">
            <h2 class="text-2xl font-bold mb-4">Upload Your File</h2>
            <p class="mb-4 text-gray-600">Upload an MP3 or MP4 file to get an English transcript of the audio content.</p>

            <div id="drop-zone" class="drop-zone">
                <i class="fas fa-cloud-upload-alt text-4xl text-blue-500 mb-2"></i>
                <p class="font-medium mb-1">Drag &amp; Drop your file here</p>
                <p class="text-sm text-gray-500 mb-3">or</p>
                <button id="browse-btn" type="button" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition">
                    Browse Files
                </button>
                <input type="file" id="file-input" class="hidden" accept=".mp3,.mp4">
                <p class="mt-2 text-sm text-gray-500">Supported formats: MP3, MP4 – Max 50 MB</p>
            </div>

            <!-- File details -->
            <div id="file-details" class="flex items-center mt-6 hidden">
                <i id="file-icon" class="fas fa-file-audio text-blue-500 mr-3"></i>
                <span id="file-name" class="font-medium"></span>
                <span id="file-size" class="ml-2 text-sm text-gray-500"></span>
                <button id="remove-file" type="button" class="ml-auto text-red-500 hover:text-red-600">
                    <i class="fas fa-xmark"></i>
                </button>
            </div>

            <!-- Progress bar -->
            <div id="progress-container" class="mt-6 hidden">
                <div class="flex justify-between mb-1 text-sm">
                    <span id="progress-status">Uploading…</span>
                    <span id="progress-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="progress-bar-fill" class="progress-bar-fill"></div>
                </div>
            </div>

            <!-- CTA -->
            <div class="text-center mt-6">
                <button id="upload-btn" type="button" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-6 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                    Start Transcription
                </button>
            </div>
        </section>

        <!-- Results -->
        <section id="results-card" class="card bg-white rounded-xl shadow p-8 hidden">
            <h2 class="text-2xl font-bold mb-4">Transcription Results</h2>

            <div class="mb-6">
                <div class="flex items-center mb-2">
                    <i class="fas fa-file-alt text-blue-500 mr-2"></i>
                    <h3 class="text-lg font-medium">English Transcript</h3>
                </div>
                <div id="transcript-results" class="results"></div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-between">
                <button id="copy-btn" type="button" class="bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition flex items-center justify-center">
                    <i class="fas fa-copy mr-2"></i> Copy Text
                </button>
                <button id="new-upload-btn" type="button" class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg transition">
                    Process New File
                </button>
            </div>
        </section>

        <!-- How it works -->
        <section class="card bg-white rounded-xl shadow p-8 mb-8">
            <h2 class="text-2xl font-bold mb-6">How It Works</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <div class="feature-icon"><i class="fas fa-upload"></i></div>
                    <h3 class="text-lg font-medium mb-2">1. Upload</h3>
                    <p class="text-gray-600">Securely upload your MP3 or MP4 file.</p>
                </div>
                <div class="text-center">
                    <div class="feature-icon"><i class="fas fa-gears"></i></div>
                    <h3 class="text-lg font-medium mb-2">2. Process</h3>
                    <p class="text-gray-600">We extract and analyse the audio using AI.</p>
                </div>
                <div class="text-center">
                    <div class="feature-icon"><i class="fas fa-language"></i></div>
                    <h3 class="text-lg font-medium mb-2">3. Translate</h3>
                    <p class="text-gray-600">Receive an accurate English transcript.</p>
                </div>
            </div>
        </section>

        <!-- FAQ -->
        <section class="card bg-white rounded-xl shadow p-8 mb-8">
            <h2 class="text-2xl font-bold mb-6">Frequently Asked Questions</h2>
            <div class="space-y-6">
                <details class="p-4 border border-gray-200 rounded-lg">
                    <summary class="font-medium cursor-pointer">What file formats are supported?</summary>
                    <p class="mt-2 text-gray-600">Currently MP3 audio and MP4 video files.</p>
                </details>
                <details class="p-4 border border-gray-200 rounded-lg">
                    <summary class="font-medium cursor-pointer">Is there a file‑size limit?</summary>
                    <p class="mt-2 text-gray-600">Yes, 50 MB per file. Compress or split larger files first.</p>
                </details>
                <details class="p-4 border border-gray-200 rounded-lg">
                    <summary class="font-medium cursor-pointer">How accurate is the transcription?</summary>
                    <p class="mt-2 text-gray-600">Typically 85‑95 % depending on audio quality and accent.</p>
                </details>
                <details class="p-4 border border-gray-200 rounded-lg">
                    <summary class="font-medium cursor-pointer">How is my data handled?</summary>
                    <p class="mt-2 text-gray-600">Files are processed in‑browser only and never leave your device.</p>
                </details>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-500 text-sm mt-8">
            <p>&copy; 2025 Audio &amp; Video Translation Service. All rights reserved.</p>
        </footer>
    </div>

    <!-- Main script (self‑contained) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Elements
            const dropZone = document.getElementById('drop-zone');
            const fileInput = document.getElementById('file-input');
            const browseBtn = document.getElementById('browse-btn');
            const uploadBtn = document.getElementById('upload-btn');
            const fileDetails = document.getElementById('file-details');
            const fileNameEl = document.getElementById('file-name');
            const fileSizeEl = document.getElementById('file-size');
            const fileIcon   = document.getElementById('file-icon');
            const removeFile = document.getElementById('remove-file');
            const progressContainer = document.getElementById('progress-container');
            const progressFill      = document.getElementById('progress-bar-fill');
            const progressStatus    = document.getElementById('progress-status');
            const progressPercent   = document.getElementById('progress-percentage');
            const resultsCard       = document.getElementById('results-card');
            const transcriptResults = document.getElementById('transcript-results');
            const copyBtn           = document.getElementById('copy-btn');
            const newUploadBtn      = document.getElementById('new-upload-btn');

            let selectedFile = null;

            // ===============  UI Actions  ===============
            browseBtn.onclick = () => fileInput.click();
            fileInput.onchange = e => handleFile(e.target.files[0]);

            // Drag‑and‑drop
            ['dragenter','dragover'].forEach(evt => {
                dropZone.addEventListener(evt, e => { e.preventDefault(); dropZone.classList.add('active'); });
            });
            ['dragleave','drop'].forEach(evt => {
                dropZone.addEventListener(evt, e => { e.preventDefault(); dropZone.classList.remove('active'); });
            });
            dropZone.ondrop = e => handleFile(e.dataTransfer.files[0]);

            removeFile.onclick = reset;
            newUploadBtn.onclick = () => { reset(); resultsCard.classList.add('hidden'); };
            uploadBtn.onclick = () => selectedFile && simulateAll();

            copyBtn.onclick = () => {
                navigator.clipboard.writeText(transcriptResults.textContent).then(() => {
                    copyBtn.innerHTML = '<i class="fas fa-check mr-2"></i> Copied!';
                    setTimeout(() => copyBtn.innerHTML = '<i class="fas fa-copy mr-2"></i> Copy Text', 2000);
                });
            };

            // ===============  Helpers  ===============
            function handleFile(file) {
                if (!file) return;
                if (!/\.(mp3|mp4)$/.test(file.name.toLowerCase())) return alert('Please select an MP3 or MP4 file.');
                if (file.size > 50 * 1024 * 1024) return alert('File is larger than 50 MB.');

                selectedFile = file;
                fileNameEl.textContent = file.name;
                fileSizeEl.textContent = formatBytes(file.size);
                fileIcon.className = `fas ${file.type.startsWith('audio') ? 'fa-file-audio' : 'fa-file-video'} text-blue-500 mr-3`;
                fileDetails.classList.remove('hidden');
                uploadBtn.disabled = false;
            }

            function reset() {
                selectedFile = null;
                fileInput.value = '';
                fileDetails.classList.add('hidden');
                progressContainer.classList.add('hidden');
                uploadBtn.disabled = true;
            }

            const formatBytes = bytes => bytes < 1024 ? `${bytes} B` : bytes < 1048576 ? `${(bytes / 1024).toFixed(2)} KB` : `${(bytes / 1048576).toFixed(2)} MB`;

            // ===============  Demo simulation  ===============
            // Replace simulateAll() with callRealApi() once a backend endpoint exists
            function simulateAll() {
                progressContainer.classList.remove('hidden');
                progressStatus.textContent = 'Uploading…';
                animateProgress(100, 6, () => {
                    progressStatus.textContent = 'Processing…';
                    animateProgress(100, 8, () => {
                        progressStatus.textContent = 'Generating transcript…';
                        animateProgress(100, 6, () => {
                            transcriptResults.textContent = generateDemoTranscript();
                            resultsCard.classList.remove('hidden');
                            progressContainer.classList.add('hidden');
                        });
                    });
                });
            }

            const animateProgress = (target, step, cb) => {
                let pct = 0;
                const id = setInterval(() => {
                    pct += step;
                    progressFill.style.width = `${pct}%`;
                    progressPercent.textContent = `${pct}%`;
                    if (pct >= target) { clearInterval(id); cb(); }
                }, 120);
            };

            const demoAudio = [
                "Welcome to our podcast. Today we're discussing the future of AI…",
                "Thank you for joining this talk on climate change…",
                "In this lecture we explore the fundamentals of quantum physics…"
            ];
            const demoVideo = [
                "In this tutorial we build a responsive website with HTML & CSS…",
                "Welcome to our cooking channel! Today we're making a classic pasta dish…",
                "Let's discuss last quarter's financial results…"
            ];
            const generateDemoTranscript = () => {
                const arr = selectedFile.type.startsWith('audio') ? demoAudio : demoVideo;
                return arr[Math.floor(Math.random() * arr.length)];
            };
        });
    </script>
</body>
</html>
